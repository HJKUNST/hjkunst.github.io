<!doctype html>
<html
  lang="en-us"
  dir="ltr"
  class="scroll-smooth"
>
  <head>
    







<meta charset="utf-8" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-YNCT92GZ70"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-YNCT92GZ70');
</script>

<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="robots" content="index, follow" />
<meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1" />

<meta name="description" content="Purpose
The rate at which I save YouTube videos is always faster than the rate at which I can actually watch them. Research videos I&rsquo;ve bookmarked, videos I&rsquo;ve saved for later, links I copied because they might become references—they keep piling up. The bottleneck is time.
Most existing YouTube summarization tools rely on embedded subtitles, i.e., transcripts uploaded by the creator. If a video has no transcript, summarization becomes impossible. Videos without Korean subtitles, videos with low-quality auto-captions, or videos with no captions at all still require watching from start to finish." />


<meta property="og:title" content="Auto-summarizing YouTube videos with n8n &#43; Gemini" />
<meta property="og:description" content="Purpose
The rate at which I save YouTube videos is always faster than the rate at which I can actually watch them. Research videos I&rsquo;ve bookmarked, videos I&rsquo;ve saved for later, links I copied because they might become references—they keep piling up. The bottleneck is time.
Most existing YouTube summarization tools rely on embedded subtitles, i.e., transcripts uploaded by the creator. If a video has no transcript, summarization becomes impossible. Videos without Korean subtitles, videos with low-quality auto-captions, or videos with no captions at all still require watching from start to finish." />
<meta property="og:url" content="https://hjkunst.github.io/en/posts/2026-02-17-n8n-youtube/" />
<meta property="og:site_name" content="Strawberry Fields — Pastoral Tech Notes by @lkkunst" />
<meta property="og:type" content="website" />
<meta property="og:image" content="https://hjkunst.github.io/n8n-youtube/n8n-youtube-4.webp" />
<meta property="og:locale" content="en_us" />




<link rel="alternate" hreflang="ko-kr" href="https://hjkunst.github.io/ko/posts/2026-02-17-n8n-youtube/" />

<link rel="alternate" hreflang="en-us" href="https://hjkunst.github.io/en/posts/2026-02-17-n8n-youtube/" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Auto-summarizing YouTube videos with n8n &#43; Gemini" />
<meta name="twitter:description" content="Purpose
The rate at which I save YouTube videos is always faster than the rate at which I can actually watch them. Research videos I&rsquo;ve bookmarked, videos I&rsquo;ve saved for later, links I copied because they might become references—they keep piling up. The bottleneck is time.
Most existing YouTube summarization tools rely on embedded subtitles, i.e., transcripts uploaded by the creator. If a video has no transcript, summarization becomes impossible. Videos without Korean subtitles, videos with low-quality auto-captions, or videos with no captions at all still require watching from start to finish." />
<meta name="twitter:image" content="https://hjkunst.github.io/n8n-youtube/n8n-youtube-4.webp" />

<title>Auto-summarizing YouTube videos with n8n &#43; Gemini</title>



<link rel="icon" type="image/svg+xml" href="/favicon.svg">


<link rel="icon" type="image/png" href="/favicon.png">


<link rel="apple-touch-icon" sizes="180x180" href="/favicon.svg">
<link rel="manifest" href="/site.webmanifest">


<meta name="theme-color" content="#FF6254">
<meta name="msapplication-TileColor" content="#FF6254">



<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true,
      packages: { '[+]': ['ams'] }
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>


<link
        rel="stylesheet"
        href="/css/output.min.e6ea1a713ee8508a7ae1581f36a75a67ceb7390eaea21503ce3bade6cfabca8c.css"
        integrity="sha256-5uoacT7oUIp64VgfNqdaZ863OQ6uohUDzjut5s&#43;ryow="
        crossorigin="anonymous"
      /><link
        rel="stylesheet"
        href="/css/custom.min.b0e39fb81464392a8c1dfcf79e38a1369b0ac0d49a0a8bfa676768c503a22757.css"
        integrity="sha256-sOOfuBRkOSqMHfz3njihNpsKwNSaCov6Z2doxQOiJ1c="
        crossorigin="anonymous"
      />
  </head>
  <body class="bg-white text-black antialiased">
    <div class="flex h-screen flex-col justify-between font-sans">
      <header class="site-header sticky top-0 z-50" style="background: rgba(228, 228, 228, 0.1); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);">
        <div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0">
          <div class="flex items-center justify-between py-4">
            <a class="group break-words" aria-label="Strawberry Fields — Pastoral Tech Notes by @lkkunst" href="/en/">
  <div class="flex items-center justify-between">
    <div class="sm:mr-3">
      <img src="/images/logo.svg" width="32" height="32" alt="Logo Image" />
    </div>

    <div class="hidden text-2xl font-semibold sm:block group-hover:underline">
      <span>Strawberry Fields — Pastoral Tech Notes by @lkkunst</span>
    </div>
  </div>
</a>

<div class="flex items-center space-x-4 leading-5 sm:space-x-6">
  <div class="items-center space-x-4 overflow-x-auto flex sm:space-x-6">
    
      <a
        href="/en/about"
        class="font-medium text-gray-900 hover:text-indigo-500"
        
        >About</a
      >
    
      <a
        href="/en/tags"
        class="font-medium text-gray-900 hover:text-indigo-500"
        
        >Tags</a
      >
    
    <div class="lang-toggle"><span class="lang-toggle__item lang-toggle__item--active">ENG</span><a class="lang-toggle__item" href="/ko/posts/2026-02-17-n8n-youtube/">KOR</a></div>

    <a href="https://github.com/hjkunst" target="_blank">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="currentColor"
        class="fill-[#24292F] hover:fill-indigo-500 h-6 w-6"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M12.0099 0C5.36875 0 0 5.5 0 12.3042C0 17.7432 3.43994 22.3472 8.21205 23.9767C8.80869 24.0992 9.02724 23.712 9.02724 23.3862C9.02724 23.101 9.00757 22.1232 9.00757 21.1045C5.6667 21.838 4.97099 19.6378 4.97099 19.6378C4.43409 18.2118 3.63858 17.8452 3.63858 17.8452C2.54511 17.0915 3.71823 17.0915 3.71823 17.0915C4.93117 17.173 5.56763 18.3545 5.56763 18.3545C6.64118 20.2285 8.37111 19.699 9.06706 19.373C9.16638 18.5785 9.48473 18.0285 9.82275 17.723C7.15817 17.4377 4.35469 16.3785 4.35469 11.6523C4.35469 10.3078 4.8316 9.20775 5.58729 8.35225C5.46807 8.04675 5.0504 6.7835 5.70677 5.09275C5.70677 5.09275 6.72083 4.76675 9.00732 6.35575C9.98625 6.08642 10.9958 5.9494 12.0099 5.94825C13.024 5.94825 14.0577 6.091 15.0123 6.35575C17.299 4.76675 18.3131 5.09275 18.3131 5.09275C18.9695 6.7835 18.5515 8.04675 18.4323 8.35225C19.2079 9.20775 19.6652 10.3078 19.6652 11.6523C19.6652 16.3785 16.8617 17.4172 14.1772 17.723C14.6148 18.11 14.9924 18.8433 14.9924 20.0045C14.9924 21.6545 14.9727 22.9788 14.9727 23.386C14.9727 23.712 15.1915 24.0992 15.7879 23.977C20.56 22.347 23.9999 17.7432 23.9999 12.3042C24.0196 5.5 18.6312 0 12.0099 0Z"
        />
      </svg>
    </a>
  </div>
</div>

          </div>
        </div>
      </header>
      
      <main class="mb-auto">
        <section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0">
          
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "Auto-summarizing YouTube videos with n8n \u002b Gemini",
      "datePublished": "2026-02-17T00:00:00\u002b09:00",
      "dateModified": "2026-02-17T00:00:00\u002b09:00",
      "description": "\u003cp\u003e\u003cstrong\u003ePurpose\u003c\/strong\u003e\u003c\/p\u003e\n\u003cp\u003eThe rate at which I save YouTube videos is always faster than the rate at which I can actually watch them. Research videos I\u0026rsquo;ve bookmarked, videos I\u0026rsquo;ve saved for later, links I copied because they might become references—they keep piling up. The bottleneck is time.\u003c\/p\u003e\n\u003cp\u003eMost existing YouTube summarization tools rely on embedded subtitles, i.e., transcripts uploaded by the creator. If a video has no transcript, summarization becomes impossible. Videos without Korean subtitles, videos with low-quality auto-captions, or videos with no captions at all still require watching from start to finish.\u003c\/p\u003e",
      "image": "https:\/\/hjkunst.github.io\/n8n-youtube\/n8n-youtube-4.webp",
      "url": "https:\/\/hjkunst.github.io\/en\/posts\/2026-02-17-n8n-youtube\/",
      "author": [{ "@type": "Person", "name": "hjkunst" }]
    }
  </script>
<section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0">
  <article>
    <div class="xl:divide-y xl:divide-gray-200">
      <header class="pt-16 xl:pb-16">
        <div class="text-center">
          <div class="article-meta-group">
            <dl>
              <div>
                <dt class="sr-only">Published on</dt>
                <dd class="text-base font-medium leading-6 text-gray-500">
                  
                  
                  <time datetime="2026-02-17T00:00:00&#43;09:00">Tuesday, February 17, 2026</time>
                </dd>
              </div>
            </dl>
            <div>
              <h1
                class="text-3xl font-extrabold leading-8 tracking-tight text-gray-900 sm:text-3xl sm:leading-9 md:text-4xl md:leading-10">
                <div>Auto-summarizing YouTube videos with n8n &#43; Gemini</div>
              </h1>
            </div>
            <div class="flex flex-col items-center gap-3">
              
              <div class="article-tag-row flex flex-wrap items-center justify-center gap-3">
                
                <a href="/en/tags/ai" class="tag-chip">AI</a>
                
                <a href="/en/tags/project" class="tag-chip">Project</a>
                
              </div>
              
            </div>
          </div>
          
          <div class="article-meta-to-banner article-banner-wrap overflow-hidden">
            <img src="/n8n-youtube/n8n-youtube-4.webp" alt="Auto-summarizing YouTube videos with n8n &#43; Gemini"
              class="article-banner-image h-auto w-full object-cover" />
          </div>
          
        </div>
      </header>

      <div class="grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0">
        <aside class="hidden xl:block xl:col-start-1 xl:row-start-1">
          <div class="sticky top-24 space-y-8">
            <div class="py-10">
              <h2 class="text-xs uppercase tracking-wide text-gray-500">
                Table of Contents
              </h2>
              <nav class="mt-2">
                <ul class="space-y-3">
                  <li class="text-sm">
                    <a href="#run-docker-desktop" class="text-indigo-500 hover:text-indigo-600">Run Docker Desktop</a>
                  </li>
                  <li class="text-sm">
                    <a href="#move-into-the-project-folder" class="text-indigo-500 hover:text-indigo-600">Move into the project folder</a>
                  </li>
                  <li class="text-sm">
                    <a href="#configure-env" class="text-indigo-500 hover:text-indigo-600">Configure .env</a>
                  </li>
                  <li class="text-sm">
                    <a href="#start-the-n8n-container" class="text-indigo-500 hover:text-indigo-600">Start the n8n container</a>
                  </li>
                  <li class="text-sm">
                    <a href="#import-the-workflow" class="text-indigo-500 hover:text-indigo-600">Import the workflow</a>
                  </li>
                  <li class="text-sm">
                    <a href="#switching-models-gemini--gemma" class="text-indigo-500 hover:text-indigo-600">Switching models (Gemini / Gemma)</a>
                  </li>
                  <li class="text-sm">
                    <a href="#choosing-test-vs-prod-mode" class="text-indigo-500 hover:text-indigo-600">Choosing Test vs Prod mode</a>
                  </li>
                  <li class="text-sm">
                    <a href="#sending-a-request-with-curl" class="text-indigo-500 hover:text-indigo-600">Sending a request with curl</a>
                  </li>
                  <li class="text-sm">
                    <a href="#confirming-the-md-file-is-created" class="text-indigo-500 hover:text-indigo-600">Confirming the .md file is created</a>
                  </li>
                  <li class="text-sm">
                    <a href="#common-failure-points" class="text-indigo-500 hover:text-indigo-600">Common failure points</a>
                  </li>
                  <li class="text-sm">
                    <a href="#about-the-current-workflow-structure" class="text-indigo-500 hover:text-indigo-600">About the current workflow structure</a>
                  </li>
                  <li class="text-sm">
                    <a href="#customization-points" class="text-indigo-500 hover:text-indigo-600">Customization Points</a>
                    <ul class="ml-4 mt-2 space-y-2">
                      <li class="text-sm">
                        <a href="#structuring-the-output-format" class="text-indigo-500 hover:text-indigo-600">Structuring the output format</a>
                      </li>
                      <li class="text-sm">
                        <a href="#dynamic-model-selection" class="text-indigo-500 hover:text-indigo-600">Dynamic model selection</a>
                      </li>
                      <li class="text-sm">
                        <a href="#auto-saving-markdown-files" class="text-indigo-500 hover:text-indigo-600">Auto-saving Markdown files</a>
                      </li>
                    </ul>
                  </li>
                  <li class="text-sm">
                    <a href="#errata--study-notes" class="text-indigo-500 hover:text-indigo-600">Errata / Study Notes</a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </aside>

        <div class="divide-y divide-gray-200 xl:col-span-3 xl:row-span-2 xl:pb-0">
          <div class="prose max-w-none pb-8 pt-10">
            <p><strong>Purpose</strong></p>
<p>The rate at which I save YouTube videos is always faster than the rate at which I can actually watch them. Research videos I&rsquo;ve bookmarked, videos I&rsquo;ve saved for later, links I copied because they might become references—they keep piling up. The bottleneck is time.</p>
<p>Most existing YouTube summarization tools rely on embedded subtitles, i.e., transcripts uploaded by the creator. If a video has no transcript, summarization becomes impossible. Videos without Korean subtitles, videos with low-quality auto-captions, or videos with no captions at all still require watching from start to finish.</p>
<p>This workflow bypasses that limitation. Instead of depending on transcripts, it pulls video information via oEmbed and HTML parsing, then has a Gemini model generate the summary directly. It runs on n8n (an automation tool), and the final output is saved as a Markdown file. This post records the full setup process from scratch.</p>
<p>Methodology</p>
<p><a href="https://n8n.io/workflows/2679-ai-powered-youtube-video-summarization-and-analysis/">https://n8n.io/workflows/2679-ai-powered-youtube-video-summarization-and-analysis/</a></p>
<p>I followed the structure of that workflow, but:</p>
<p>I did not connect Telegram.</p>
<p>I replaced the OpenAI API integration with a Gemini API integration.</p>
<p>I modified it so the response is returned as Markdown and saved locally.</p>
<hr>
<h2 id="run-docker-desktop">Run Docker Desktop</h2>
<div style="text-align: center; margin: 1rem 0;">
  <img src="/n8n-youtube/n8n-youtube-1.webp" alt="Docker Desktop running" style="width: 80%; min-width: 480px; height: auto; display: block; margin: 0 auto;" />
  <p style="margin-top: 8px; font-style: italic; color: #666;">Docker Desktop running screen</p>
</div>
<div style="text-align: center; margin: 1rem 0;">
  <img src="/n8n-youtube/n8n-youtube-2.webp" alt="Docker menu bar status" style="width: 80%; min-width: 480px; height: auto; display: block; margin: 0 auto;" />
  <p style="margin-top: 8px; font-style: italic; color: #666;">Docker menu bar status check</p>
</div>
<p>Docker lets you run applications in isolated container environments. Since n8n runs inside a container, the first step is to confirm that the Docker daemon is running. Launch Docker from Applications and check that the whale icon in the menu bar shows a running state.</p>
<p>You can verify it in Terminal with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker --version
</span></span><span style="display:flex;"><span>docker compose version
</span></span><span style="display:flex;"><span>docker ps
</span></span></code></pre></div><p>If versions and the container list print without errors, Docker is running correctly.</p>
<hr>
<h2 id="move-into-the-project-folder">Move into the project folder</h2>
<p>Because both the docker compose command and the workflow files live in this folder, you must move into it before running anything.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd ~/Desktop/n8n
</span></span></code></pre></div><p>After moving, confirm that docker-compose.yml exists in the current directory.</p>
<hr>
<h2 id="configure-env">Configure .env</h2>
<p><code>.env</code> is an environment variable file used to keep sensitive values—like API keys—outside your code. Without these values, the container may fail to start, or the summarization step may fail. The required fields are:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>GOOGLE_GEMINI_API_KEY<span style="color:#f92672">=</span>...YOUR_REAL_KEY...
</span></span><span style="display:flex;"><span>GEMINI_MODEL<span style="color:#f92672">=</span>gemini-2.5-flash
</span></span><span style="display:flex;"><span>N8N_ENCRYPTION_KEY<span style="color:#f92672">=</span>a_sufficiently_long_random_string
</span></span><span style="display:flex;"><span>N8N_HOST<span style="color:#f92672">=</span>localhost
</span></span><span style="display:flex;"><span>GENERIC_TIMEZONE<span style="color:#f92672">=</span>Asia/Seoul
</span></span></code></pre></div><p>The following are optional. If you are not using them, you can leave them empty:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>OPENAI_API_KEY<span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>TELEGRAM_BOT_TOKEN<span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>TELEGRAM_CHAT_ID<span style="color:#f92672">=</span>
</span></span></code></pre></div><p>When saving, be careful not to introduce spaces or quotes into the values. A lot of unexpected errors originate from this step.</p>
<hr>
<h2 id="start-the-n8n-container">Start the n8n container</h2>
<p>n8n is a workflow automation tool that lets you connect services into automated flows without writing code. One command starts the container in the background:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker compose up -d
</span></span></code></pre></div><p><code>up</code> creates (or reuses) containers, networks, and volumes and starts them.</p>
<p><code>-d</code> runs in detached mode so the terminal is not occupied.</p>
<p>Then check status with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker compose ps
</span></span><span style="display:flex;"><span>docker compose logs --tail<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span> n8n
</span></span></code></pre></div><p>If the n8n service is Up and the logs show the editor URL, it has started correctly.</p>
<div style="text-align: center; margin: 1rem 0;">
  <img src="/n8n-youtube/n8n-youtube-3.webp" alt="n8n container running status" style="width: 80%; min-width: 480px; height: auto; display: block; margin: 0 auto;" />
  <p style="margin-top: 8px; font-style: italic; color: #666;">n8n container running status check</p>
</div>
<hr>
<h2 id="import-the-workflow">Import the workflow</h2>
<div style="text-align: center; margin: 1rem 0;">
  <img src="/n8n-youtube/n8n-youtube-4.webp" alt="Workflow Import" style="width: 80%; min-width: 480px; height: auto; display: block; margin: 0 auto;" />
  <p style="margin-top: 8px; font-style: italic; color: #666;">Workflow Import screen</p>
</div>
<p>n8n does not automatically load workflow JSON files from disk. You must import them manually.</p>
<p>Open http://localhost:5678 in your browser, then go to Workflows → Import from File, and load youtube-summarization-workflow.json. After you click Save, if there are no red error nodes on the canvas, the import succeeded.</p>
<p>Below is a brief explanation of what each node does.</p>
<p><strong>Webhook</strong> <br>
The entry point that receives external POST requests. When a request comes to the /ytube path, the workflow starts. Since responseMode is set to responseNode, the response is handled by the later Respond to Webhook node.</p>
<p><strong>Get YouTube URL</strong> <br>
Extracts youtubeUrl from the webhook request body and passes it downstream. This is a Set node that explicitly pulls $json.body.youtubeUrl so later nodes can reference a clean, predictable structure.</p>
<p><strong>YouTube Video ID</strong> <br>
Uses a regex to extract the 11-character YouTube video ID from the URL string. It also sanitizes escaped characters (like ?, =) and removes whitespace. This defends against special characters getting introduced when sending requests via curl.</p>
<p><strong>Get YouTube Video Info</strong> <br>
Calls the oEmbed API to retrieve basic public metadata. It sends a GET request to <a href="https://www.youtube.com/oembed?url=">https://www.youtube.com/oembed?url=</a>&hellip;. The response includes the video title (title), channel name (author_name), and thumbnail URL (thumbnail_url). This pulls public info without requiring a YouTube Data API key.</p>
<p><strong>Get Video Page HTML</strong> <br>
Fetches the full HTML of the video page. This is used to extract information that oEmbed does not provide—such as the video description (description) and keywords (keywords)—by reading the page source directly.</p>
<p><strong>Extract Video Data</strong> <br>
Merges outputs from the two previous nodes into one object. It parses meta tags and JSON-LD structures in the HTML to extract description and keywords, then combines them with oEmbed results (title, author_name, thumbnail_url). This node&rsquo;s output becomes the actual input payload sent to Gemini.</p>
<p><strong>Gemini Summarize &amp; Analyze</strong> <br>
Sends a POST request to the Gemini API to generate the summary. The model name is read dynamically from $env.GEMINI_MODEL, and defaults to gemma-3-1b-it if unset. The prompt includes video title, channel name, URL, description, and keywords. The output format is fixed into four sections: Key topics, Topic shift map, Detailed timeline summary, and Next steps. temperature is set to 0.55 and maxOutputTokens to 3200.</p>
<p><strong>Response Object</strong> <br>
Extracts the summary text from Gemini&rsquo;s response and restructures it for downstream use. It also removes Markdown bold markers (**) via .replace(/**/g, &lsquo;&rsquo;). The markdown field concatenates video title, channel, URL, and the summary into a finalized document used both for saving and for HTTP responses.</p>
<p><strong>Respond to Webhook</strong> <br>
Returns the markdown field generated by Response Object as the HTTP response body. When you call the webhook with curl, the Markdown text printed in the terminal is produced by this node.</p>
<p><strong>Save Markdown File</strong> <br>
An Execute Command node that calls the save-summary-md.sh script to save the summary as a .md file. It passes Response Object JSON into stdin (via the &ndash;from-json flag), and saves into /workspace/summaries. The filename is generated inside the script using a timestamp and the video title.</p>
<p><strong>Telegram</strong> <br>
A node that sends the summary via a Telegram bot. It is currently disabled (disabled: true). If enabled, it posts a message including the video title, channel name, URL, and summary to the chat specified by $env.TELEGRAM_CHAT_ID.</p>
<h2 id="switching-models-gemini--gemma">Switching models (Gemini / Gemma)</h2>
<div style="text-align: center; margin: 1rem 0;">
  <img src="/n8n-youtube/n8n-youtube-5.webp" alt="Model configuration change" style="width: 80%; min-width: 480px; height: auto; display: block; margin: 0 auto;" />
  <p style="margin-top: 8px; font-style: italic; color: #666;">Model configuration change screen</p>
</div>
<p>The default model is set to gemini-2.5-flash (I used a free-tier model due to budget constraints). You can switch models by editing only GEMINI_MODEL in .env. You can check per-model limits at <a href="https://aistudio.google.com/app/api-keys">https://aistudio.google.com/app/api-keys</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>GEMINI_MODEL<span style="color:#f92672">=</span>gemini-2.0-flash
</span></span><span style="display:flex;"><span><span style="color:#75715e"># or</span>
</span></span><span style="display:flex;"><span>GEMINI_MODEL<span style="color:#f92672">=</span>gemini-2.0-flash-lite
</span></span></code></pre></div><p>After editing, run docker compose up -d again to apply changes.</p>
<p>If you prefer changing it directly in the UI, click the Gemini Summarize &amp; Analyze node and replace only the /models/<model-name>:generateContent part of the URL, then save. You can also edit the JSON file directly: change the same segment inside the node&rsquo;s url field and re-import.</p>
<p>If you see model-related errors:</p>
<p><code>404</code> or <code>400</code> usually indicates a model name typo or an unsupported model.</p>
<p><code>429</code> indicates your API key quota is exhausted.</p>
<hr>
<h2 id="choosing-test-vs-prod-mode">Choosing Test vs Prod mode</h2>
<p>The URLs look similar, but the execution conditions differ. Test URL is <code>http://localhost:5678/webhook-test/ytube</code>, and before calling it, you must click Execute workflow so the workflow becomes Waiting for trigger event. Prod URL is <code>http://localhost:5678/webhook/ytube</code>, and the workflow must be Active for it to work. It is important to confirm which mode you are using and match the URL accordingly.</p>
<p>For my purposes today, I did not need Prod mode. Click Execute workflow first, then send the request.</p>
<div style="text-align: center; margin: 1rem 0;">
  <img src="/n8n-youtube/n8n-youtube-6.webp" alt="Execute workflow button" style="width: 80%; min-width: 480px; height: auto; display: block; margin: 0 auto;" />
  <p style="margin-top: 8px; font-style: italic; color: #666;">Execute workflow button</p>
</div>
<hr>
<h2 id="sending-a-request-with-curl">Sending a request with curl</h2>
<div style="text-align: center; margin: 1rem 0;">
  <img src="/n8n-youtube/n8n-youtube-7.webp" alt="curl request example" style="width: 80%; min-width: 480px; height: auto; display: block; margin: 0 auto;" />
  <p style="margin-top: 8px; font-style: italic; color: #666;">curl request example</p>
</div>
<p>curl is a command-line tool that lets you send HTTP requests directly from the terminal. It&rsquo;s the fastest way to validate webhook input.</p>
<p>Only the URL changes between Test and Prod mode; everything else remains the same.</p>
<p>Test mode:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST <span style="color:#e6db74">&#34;http://localhost:5678/webhook-test/ytube&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -d <span style="color:#e6db74">&#39;{&#34;youtubeUrl&#34;:&#34;https://www.youtube.com/watch?v=6zXcw8lf_zo&#34;}&#39;</span>
</span></span></code></pre></div><p>Prod mode:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST <span style="color:#e6db74">&#34;http://localhost:5678/webhook/ytube&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -d <span style="color:#e6db74">&#39;{&#34;youtubeUrl&#34;:&#34;https://www.youtube.com/watch?v=6zXcw8lf_zo&#34;}&#39;</span>
</span></span></code></pre></div><ul>
<li><code>-X POST</code> sets the webhook method, <code>-H</code> declares that the body is JSON, and <code>-d</code> provides the actual payload. The payload key must be <code>youtubeUrl</code>.</li>
</ul>
<hr>
<h2 id="confirming-the-md-file-is-created">Confirming the .md file is created</h2>
<div style="text-align: center; margin: 1rem 0;">
  <img src="/n8n-youtube/n8n-youtube-8.webp" alt="Generated md file list" style="width: 80%; min-width: 480px; height: auto; display: block; margin: 0 auto;" />
  <p style="margin-top: 8px; font-style: italic; color: #666;">Generated md file list</p>
</div>
<p>To confirm whether the Save Markdown File node actually saved the output, run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -lt ~/Desktop/n8n/summaries | head
</span></span></code></pre></div><p>If a .md file with the current timestamp is present, the workflow executed end-to-end successfully.</p>
<p>I tested this using a Moneygraphy video I&rsquo;ve been watching often lately.</p>
<hr>
<h2 id="common-failure-points">Common failure points</h2>
<p>The places where things break are fairly predictable.</p>
<p><code>404 webhook not registered</code> is when you didn&rsquo;t click Execute workflow in Test mode, or didn&rsquo;t enable Active in Prod mode. <code>Failed to parse request body</code> is when the URL includes escaped characters like <code>\?</code> or <code>\=</code>. If <code>access to env vars denied</code> appears, check <code>N8N_BLOCK_ENV_ACCESS_IN_NODE=false</code>. <code>Unrecognized node type: n8n-nodes-base.executeCommand</code> means you should check whether <code>NODES_EXCLUDE=[&quot;n8n-nodes-base.localFileTrigger&quot;]</code> is still being applied.</p>
<hr>
<h2 id="about-the-current-workflow-structure">About the current workflow structure</h2>
<p>I simplified the older, more complex transcript-based flow and removed the LangChain-heavy dependency. The current system runs as <code>oEmbed + HTML parsing + HTTP model call</code>. The model is <code>gemma-3-1b-it</code>. The response is returned as Markdown and automatically saved as a .md file. The core advantage is that it can summarize videos even when transcripts do not exist.</p>
<h2 id="customization-points">Customization Points</h2>
<p>The baseline setup works, but in practice you quickly find places that need adjustment: summaries are too shallow, switching models forces you to open JSON every time, or outputs are not saved anywhere. The following three changes were made to solve those issues.</p>
<hr>
<h3 id="structuring-the-output-format">Structuring the output format</h3>
<p>Summaries generated with the default prompt were too minimal. They didn&rsquo;t capture topic transitions, and there was no timeline-level structure. To fix this, I redesigned the prompt in the Gemini Summarize &amp; Analyze node into a four-stage structure.</p>
<p>The output order is fixed as follows:</p>
<ol>
<li>Key topics: core topics and supporting evidence</li>
<li>Topic shift map: when the topic shifts and what signals indicate the shift</li>
<li>Detailed timeline summary: segment-by-segment analysis</li>
<li>Next steps: follow-up items to review</li>
</ol>
<p>At the end of the prompt, I explicitly listed rules: no unsupported speculation, clearly state uncertainty when uncertain, and avoid unnecessary introductions and disclaimer text. I adjusted generation settings to <code>temperature</code> 0.55 and <code>maxOutputTokens</code> 3200 to balance creativity with consistency while ensuring sufficient length.</p>
<hr>
<h3 id="dynamic-model-selection">Dynamic model selection</h3>
<p>At first, I hard-coded the model name inside the workflow JSON. Switching models required opening the file, manually editing the URL string, and re-importing. When quota limitations force frequent model switching, this becomes tedious.</p>
<p>The fix is simple: replace the model segment of the URL with an environment variable.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;url&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;=https://generativelanguage.googleapis.com/v1beta/models/{{ $env.GEMINI_MODEL || &#39;gemma-3-1b-it&#39; }}:generateContent?key={{ $env.GOOGLE_GEMINI_API_KEY }}&#34;</span>
</span></span></code></pre></div><p>Now you can change only GEMINI_MODEL in .env and run docker compose up -d. No workflow JSON edits required. I also left a commented list of available models inside .env so I can choose based on quota status.</p>
<hr>
<h3 id="auto-saving-markdown-files">Auto-saving Markdown files</h3>
<p>If the workflow runs but nothing remains afterward, it&rsquo;s not useful. I added a Save Markdown File node after Response Object. It&rsquo;s an Execute Command node that calls the save-summary-md.sh script and saves the result to disk.</p>
<p>I initially wrote the saver in Python and it failed because the n8n Docker image does not include Python. Since Node.js is included by default, I switched languages. The save path is <code>/workspace/summaries</code>, and the filename is generated automatically based on execution time and video title, in the form <code>20260216-123039-slugified-title.md</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -lt ~/Desktop/n8n/summaries | head
</span></span></code></pre></div><p>After execution, run this command to confirm the file was created.</p>
<h2 id="errata--study-notes">Errata / Study Notes</h2>
<ol>
<li>Q. Why did I create a Dockerfile and docker-compose.yml?</li>
</ol>
<ul>
<li>A.</li>
<li>Dockerfile</li>
<li><strong>When it appears</strong>: when you want to build your own n8n image that includes custom nodes on top of a base image</li>
<li><strong>Why you use it</strong>: to keep the same environment/nodes even when recreating containers</li>
<li>docker-compose.yml</li>
<li><strong>When it appears</strong>: when you want to manage run options (ports, env vars, volumes) cleanly</li>
<li><strong>Why you use it</strong>: so you can run/restart/manage configuration with a single docker compose up -d</li>
</ul>
<ol>
<li>
<p>curl structure</p>
<p>curl is a tool that sends HTTP requests directly from the terminal. You can think of it as doing what the browser does, but through a command. When you type a URL into the browser, the browser sends a request and returns a response—curl lets you run that process as text in your terminal.</p>
<p>In this workflow, curl is used to test the webhook directly. n8n workflows start only when an external POST request comes in, and a browser typically sends GET requests by default. curl is a better fit here because it allows you to specify the request method.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST <span style="color:#e6db74">&#34;http://localhost:5678/webhook-test/ytube&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -d <span style="color:#e6db74">&#39;{&#34;youtubeUrl&#34;:&#34;https://www.youtube.com/watch?v=6zXcw8lf_zo&#34;}&#39;</span>
</span></span></code></pre></div><p>This command delivers three pieces of information:</p>
<p>First, <code>-X POST</code> specifies the request method. HTTP requests have multiple types. GET is for reading data; POST is for sending data. Since the n8n webhook must receive data to trigger, you must explicitly specify POST. If you omit this option, curl will send a GET request by default and the webhook will not respond.</p>
<p>Second, <code>-H &quot;Content-Type: application/json&quot;</code> tells the server, &ldquo;the data I&rsquo;m sending is JSON.&rdquo; Headers are metadata that describe the request separately from the body. Without this header, the server may not know how to parse the body and can fail.</p>
<p>Third, <code>-d</code> provides the actual payload. Here it sends a JSON object where the key is youtubeUrl and the value is the YouTube URL. The outer payload is wrapped in single quotes because JSON itself uses double quotes internally; wrapping the whole thing in double quotes causes conflicts.</p>
<p>In summary: <code>-X POST</code> defines how you send the request, <code>-H</code> defines what format the data is in, and <code>-d</code> defines what the actual content is. If any of these are missing or incorrect, the workflow may not trigger or the request parsing may fail.</p>
</li>
</ol>
<p>Use these generated Markdown summaries only for personal study or to save time. Copyright matters.</p>

          </div>
        </div>

        <footer class="xl:col-start-1 xl:col-span-4">
          <div class="pt-4 xl:pt-8">
            <a class="text-indigo-500 hover:text-indigo-600" aria-label="Back to the list" href="/en/">← Back to the list</a>
          </div>
        </footer>
      </div>
    </div>
  </article>
</section>

        </section>
      </main>
      <footer>
        <section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0">
          <div class="mt-16 flex flex-col items-center">
  <div class="mb-2 text-sm text-gray-500">
    <span>(C) 2026. Strawberry Fields — Pastoral Tech Notes by @lkkunst all rights reserved.</span>
  </div>

  <div class="mb-8 text-sm text-gray-500">
    <span class="mr-1">Built with</span>
    <a
      class="font-semibold underline"
      href="https://github.com/discaptive/hugo-discaptive"
      target="_blank"
      >hugo-discaptive</a
    >
  </div>
</div>

        </section>
      </footer>
    </div>
  </body>
</html>
