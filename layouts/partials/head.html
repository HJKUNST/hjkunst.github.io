{{ $title := .Title | default site.Title }}
{{ $description := .Summary | default .Content }}
{{ $image := "" }}
{{ if .Params.image }}
{{ $image = printf "%s%s" .Site.BaseURL (strings.TrimPrefix "/" .Params.image) }}
{{ else }}
{{ $image = printf "%s%s" .Site.BaseURL "images/og-image.png" }}
{{ end }}


<meta charset="utf-8" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YS9Z2BGZ1Q"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-YS9Z2BGZ1Q');
</script>

<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="robots" content="index, follow" />
<meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1" />

<meta name="description" content="{{ $description }}" />

<!-- OpenGraph -->
<meta property="og:title" content="{{ $title }}" />
<meta property="og:description" content="{{ $description }}" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:site_name" content="{{ site.Title }}" />
<meta property="og:type" content="website" />
<meta property="og:image" content="{{ $image }}" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ $title }}" />
<meta name="twitter:description" content="{{ $description }}" />
<meta name="twitter:image" content="{{ $image }}" />

<title>{{ $title }}</title>

<!-- Custom Head Content -->
{{ partial "custom-head.html" . }}

<!-- MathJax 3 Configuration -->
{{ if .Site.Params.mathjax | default false }}
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true,
      packages: { '[+]': ['ams'] }
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };
</script>
<script id="MathJax-script" async
  {{ if .Site.Params.useCDN | default false -}}
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
  {{- else -}}
  src="{{ absURL "js/MathJax.js" }}"
  {{- end -}}
></script>
{{ end }}

{{ partialCached "head/css.html" . }}