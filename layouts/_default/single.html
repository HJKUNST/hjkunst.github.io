{{ define "main" }}
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "{{ .Title }}",
      "datePublished": "{{ .Date | time.Format "2006-01-02T15:04:05-07:00" }}",
      "dateModified": "{{ .Date | time.Format "2006-01-02T15:04:05-07:00" }}",
      "description": "{{ .Summary | default .Content }}",
      "image": "{{ if .Params.image }}{{ printf "%s%s" .Site.BaseURL (strings.TrimPrefix "/" .Params.image) }}{{ else }}{{ printf "%s%s" .Site.BaseURL "images/og-image.png" }}{{ end }}",
      "url": "{{ .Permalink }}",
      "author": [{ "@type": "Person", "name": "{{ .Site.Params.username }}" }]
    }
  </script>
<section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0">
  <article>
    <div class="xl:divide-y xl:divide-gray-200">
      <header class="pt-6 xl:pb-6">
        <div class="space-y-1 text-center">
          <dl class="space-y-10">
            <div>
              <dt class="sr-only">Published on</dt>
              <dd class="text-base font-medium leading-6 text-gray-500">
                {{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
                {{ $dateHuman := .Date | time.Format ":date_full" }}
                <time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>
              </dd>
            </div>
          </dl>
          <div>
            <h1
              class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">
              <div>{{ .Title }}</div>
            </h1>
          </div>
        </div>
      </header>

      <div class="grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0">
        <aside class="hidden xl:block xl:col-start-1 xl:row-start-1">
          <div class="sticky top-24 space-y-8">
            {{- if .Fragments.Headings }}
            <div class="py-4">
              <h2 class="text-xs uppercase tracking-wide text-gray-500">
                Table of Contents
              </h2>
              <nav class="mt-2">
                {{- range .Fragments.Headings }}
                <ul class="space-y-3">
                  {{- range .Headings }}
                  <li class="text-sm">
                    <a href="#{{ anchorize .ID }}" class="text-indigo-500 hover:text-indigo-600">{{ .Title | htmlUnescape }}</a>
                    {{- if .Headings }}
                    <ul class="ml-4 mt-2 space-y-2">
                      {{- range .Headings }}
                      <li class="text-sm">
                        <a href="#{{ anchorize .ID }}" class="text-indigo-500 hover:text-indigo-600">{{ .Title | htmlUnescape }}</a>
                      </li>
                      {{- end }}
                    </ul>
                    {{- end }}
                  </li>
                  {{- end }}
                </ul>
                {{- end }}
              </nav>
            </div>
            {{- end }}
          </div>
        </aside>

        <div class="divide-y divide-gray-200 xl:col-span-3 xl:row-span-2 xl:pb-0">
          <div class="prose max-w-none pb-8 pt-10">
            {{ .Content }}
          </div>

          {{- if isset .Site.Params "giscus" -}}
          <div class="py-6 text-sm text-gray-700">
            <script src="https://giscus.app/client.js" data-repo="{{ .Site.Params.giscus.repo }}"
              data-repo-id="{{ .Site.Params.giscus.repoId }}" data-category="{{ .Site.Params.giscus.category }}"
              data-category-id="{{ .Site.Params.giscus.categoryId }}" data-mapping="{{ .Site.Params.giscus.mapping }}"
              data-strict="0" data-reactions-enabled="{{ .Site.Params.giscus.reactionsEnabled }}" data-emit-metadata="0"
              data-input-position="{{ .Site.Params.giscus.inputPosition }}" data-theme="{{ .Site.Params.giscus.theme }}"
              data-lang="{{ .Site.Params.giscus.lang }}" crossorigin="anonymous" async></script>
          </div>
          {{ end }}
        </div>

        <footer class="xl:col-start-1 xl:col-span-4">
          <div class="divide-gray-200 text-sm font-medium leading-5 xl:divide-y">
            <div class="py-4 xl:py-8">
              <h2 class="text-xs uppercase tracking-wide text-gray-500">
                Tags
              </h2>
              <div class="flex flex-wrap mt-2">
                {{ range .Params.tags }}
                <a href="/tags/{{ . | urlize }}"
                  class="mr-3 text-sm font-medium uppercase text-indigo-500 hover:text-indigo-600">{{ . }}</a>
                {{ end }}
              </div>
            </div>
          </div>

          <div class="pt-4 xl:pt-8">
            <a class="text-indigo-500 hover:text-indigo-600" aria-label="Back to the list" href="/">‚Üê Back to the
              list</a>
          </div>
        </footer>
      </div>
    </div>
  </article>
</section>
{{ end }}